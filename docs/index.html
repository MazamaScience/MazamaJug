<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Minimalist Web Framework for R • beakr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A Minimalist Web Framework for R">
<meta property="og:description" content="A minimalist web framework for developing application programming 
    interfaces in R that provides a flexible framework for handling common 
    HTTP-requests, errors, logging, and an ability to integrate any R code as 
    server middle-ware.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">beakr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MazamaScience/beakr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<p><a href="https://cran.r-project.org/package=beakr"><img src="http://www.r-pkg.org/badges/version/AirSensor" alt="CRAN_Status_Badge"></a> <a href="https://cran.r-project.org/package=beakr"><img src="http://cranlogs.r-pkg.org/badges/AirSensor" alt="Downloads"></a> <a href="https://travis-ci.org/MazamaScience/beakr"><img src="https://travis-ci.org/MazamaScience/AirSensor.svg?branch=master" alt="Build Status"></a></p>
<div id="a-minimalist-web-framework-for-r" class="section level3">
<h3 class="hasAnchor">
<a href="#a-minimalist-web-framework-for-r" class="anchor"></a>A Minimalist Web Framework for R</h3>
<p><strong>beakr</strong> is a minimalist web framework for developing web services in the R Language. <strong>beakr</strong> offers a robust set of fundamental web application features and is intended to simplify the development of web services that reflect R package APIs — without obscuring R’s data processing capability and ease of use.</p>
<div id="hello-world---the-beakr-way" class="section level4">
<h4 class="hasAnchor">
<a href="#hello-world---the-beakr-way" class="anchor"></a>Hello, world! - The beakr way</h4>
<pre><code><a href="https://rdrr.io/r/base/library.html">library(beakr)
createBeakr() %&gt;% 
  getr(path = "/", function(req, res, err) "Hello, World!") %&gt;% 
  listen(host = "127.0.0.1", port = 1234) </a></code></pre>
<pre><code>## Serving beakr instance at http://127.0.0.1:1234
## Beakr Instance: Human Room
##  State: Active | Host: 127.0.0.1 | Port: 1234 | Middlewares: 1</code></pre>
</div>
</div>
<div id="overview" class="section level3">
<h3 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h3>
<p>The <strong>beakr</strong> package allows R code to listen for and interact with HTTP and WebSocket clients, so you can serve web traffic directly from a <em>beakr</em> instance. The <strong>beakr</strong> package is intended to be simple, lightweight and unopinionated.</p>
<p>While <strong>beakr</strong> is not recommended for building extensive web frameworks, R and the flexibility of the package are (potentially) up to the task. Keep in mind that <strong>beakr</strong> was not designed to be an especially performant web framework and the <em>“batteries are certainly not included”</em>. If you’re looking for full featured web frameworks, there are better tools and languages for that (see <a href="https://shiny.rstudio.com">Shiny</a>, <a href="https://www.djangoproject.com">django</a>, _etc.). <strong>beakr</strong> is inspired by the minimalist and massively-expandable frameworks offered by <a href="https://expressjs.com">Express.js</a> and <a href="https://palletsprojects.com/p/flask/">Flask</a>.</p>
<p>One of the reasons to use <strong>beakr</strong> is that it is incredibly flexible. It allows you to integrate your R code as <em>middleware</em> in a <em>beakr</em> instance. Middleware functions can execute any R code, make changes to the <em>request</em>, <em>response</em>, and <em>error</em> objects, and then serve up the response at the end the request-response cycle. The <strong>beakr</strong> package loosely follows Express.js middleware semantics, where middleware functions are functions that have access to the <em>request</em>, <em>response</em>, and <em>error</em> objects of a <em>beakr</em> instance.</p>
<p><em>Note:</em> By convention, the <em>response</em>, <em>request</em>, and <em>error</em> objects are always referred to as <code>res</code>, <code>req</code>, <code>err</code>, respectively. See the package documentation for more information.</p>
</div>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<p>Install the release version from CRAN:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html"># Not yet on CRAN network. 
install.packages("beakr")</a></code></pre>
<p>Install the development version for GitHub:</p>
<pre><code><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html"># install.packages("devtools")
devtools::install_github("MazamaScience/beakr")</a></code></pre>
</div>
<div id="examples" class="section level3">
<h3 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h3>
<div id="1-expose-r-code" class="section level4">
<h4 class="hasAnchor">
<a href="#1-expose-r-code" class="anchor"></a>1. Expose R code</h4>
<p>A <em>beakr</em> instance can easily expose R function signatures (APIs). As an example, let’s expose a simple machine learning model using the <a href="https://github.com/topepo/caret">caret</a> package and the Iris data set. The <code>predict_species()</code> function trains a KNN model for categorizing iris species and predicts the species associated with incoming data. The <em>beakr</em> instance exposes this API and, when given JSON input with the required arguments, identifies and returns the species.</p>
<pre><code><a href="https://rdrr.io/r/base/library.html"># Import libraries 
library(beakr)
library(caret)

# Load the Iris data set 
data('iris')
# Train using KNN
knn_model &lt;- train(
  Species ~ ., 
  data = iris, 
  method = 'knn', 
  trControl = trainControl(method='cv', number=10), 
  metric = 'Accuracy'
)

# Function to predict the species using the trained model. 
predict_species &lt;- function(sl, sw, pl, pw) {
  test &lt;- data.frame(
    Sepal.Length = sl, 
    Sepal.Width = sw, 
    Petal.Length = pl, 
    Petal.Width = pw, 
    Species = NA
  )
                      
  return(predict(knn_model, test))
}

# Create the beakr instance 
beakr &lt;- createBeakr()

# Use beakr to expose the model in the '/predict-species' url path. 
#   See help('decorate') for more info about decorating functions. 
beakr %&gt;%  
  postr(path = '/predict-species', decorate(predict_species)) %&gt;% 
  handleErrors() %&gt;% 
  listen(host = '127.0.0.1', port = 1234)</a></code></pre>
<p>The user can send an HTTP postr request to <code>http://127.0.0.1:1234/predict-species</code> with incoming data supplied as a JSON string containing sepal length and width (<code>sl</code>, <code>sw</code>) and petal length and width (<code>pl</code>, <code>pw</code>). The <em>beakr</em> instance responds with the predicted species of iris.</p>
<pre><code>$ curl -X postr http://127.0.0.1:1234/predict-species \
  -H 'content-type: application/json' \
  -d '{ "sl": 5.3, "sw": 4, "pl": 1.6, "pw": 0.2 }'
  
&gt; setosa</code></pre>
</div>
<div id="2-plotting" class="section level4">
<h4 class="hasAnchor">
<a href="#2-plotting" class="anchor"></a>2. Plotting</h4>
<p>We can use a built-in convenience function of a <strong>beakr</strong>’s <em>response</em> object to display a <em>ggplot</em> object. Use <code><a href="https://rdrr.io/r/utils/help.html">help('Response')</a></code> to view other <em>response</em> object methods and documentation. In this example we’ll wrap some map generation code and serve it with a <em>beakr</em> instance. Instead of decorating an existing package function, we will create a <strong>beakr</strong>-oriented wrapper function that extracts parameters fromthe request object and uses a response object method to send back raw image bytes.</p>
<pre><code><a href="https://rdrr.io/r/base/library.html">library(beakr)
library(ggplot2)

# Create a beakr-oriented wrapper
states_plot &lt;- function(req, res, err) {
  # Extract stateName from the request object
  stateName &lt;- req$parameters$stateName
  
  # Create the plot
  states &lt;- ggplot2::map_data('state', stateName)
  gg &lt;- ggplot(data = states) + 
    geom_polygon(aes(x = long, y = lat, fill = region, group = group), color = "white") + 
    coord_fixed(1.3) +
    guides(fill=FALSE) 
  
  # Pass the ggplot object to the response object plot() method 
  res$plot(gg, base64 = FALSE, height = 800, width = 800)
  
  return()
}

# Create and start a default beakr instance
createBeakr() %&gt;% 
  getr(path = '/usa', states_plot) %&gt;% 
  listen()
</a></code></pre>
<p>By visiting <code>http://127.0.0.1:8080/usa</code>, we can view a ggplot map of the United States.</p>
</div>
</div>
<div id="notes" class="section level3">
<h3 class="hasAnchor">
<a href="#notes" class="anchor"></a>Notes</h3>
<p>Fundamentally, <strong>beakr</strong> is built on top of the <strong>libuv</strong> and <strong>http-parser</strong> C libraries as beakr relies heavily upon <a href="https://github.com/rstudio/httpuv">httpuv</a>, an package that provides low-level socket and protocol support for handling HTTP and WebSocket requests directly from within R. Much of the development of the package was inspired by the excellent but no longer supported(?) <a href="https://github.com/Bart6114/jug">jug</a> package, developed by Bart Smeets.</p>
<hr>
<p>The beakr package is supported by <a href="http://mazamascience.com/">Mazama Science</a>.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/MazamaScience/beakr">https://​github.com/​MazamaScience/​beakr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/MazamaScience/beakr/issues">https://​github.com/​MazamaScience/​beakr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Hans Martin <br><small class="roles"> Author, maintainer </small>  </li>
<li>Jonathan Callahan <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://postimg.cc/bstHjjMT"><img src="https://i.postimg.cc/7YBB0Hnp/sm-beakr.png" alt="sm-beakr.png"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Hans Martin, Jonathan Callahan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
